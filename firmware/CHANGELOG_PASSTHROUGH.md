# Passthrough Mode - Changelog

## üéâ –í–ï–†–°–Ü–Ø 2.0 - –§–Ü–ù–ê–õ–¨–ù–ò–ô –†–ï–õ–Ü–ó (–ü–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ G Hub)

### ‚ú® –©–æ –Ω–æ–≤–æ–≥–æ –≤ –≤–µ—Ä—Å—ñ—ó 2.0

**–†–ï–ê–õ–Ü–ó–û–í–ê–ù–û –ü–û–í–ù–£ –ü–Ü–î–¢–†–ò–ú–ö–£ GET/SET_REPORT FORWARDING!**

–¢–µ–ø–µ—Ä RP2350 –º–æ–∂–µ **–ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–æ–∑–æ—Ä–æ** –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –≤—Å—ñ –∫–æ–º–∞–Ω–¥–∏ –≤—ñ–¥ G Hub –¥–æ –º–∏—à—ñ, –≤–∫–ª—é—á–∞—é—á–∏:
- ‚úÖ GET_REPORT - —á–∏—Ç–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∑ –º–∏—à—ñ
- ‚úÖ SET_REPORT - –∑–∞–ø–∏—Å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –≤ –º–∏—à—É
- ‚úÖ Feature Reports - –¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è
- ‚úÖ Control Transfers - –ø—Ä–æ–∑–æ—Ä–∞ –ø–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ tuh_control_xfer()

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç: 100% —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å G Hub

–í—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—é—Ç—å —á–µ—Ä–µ–∑ Logitech G Hub:
- DPI –∑–º—ñ–Ω–∞
- RGB –ø—ñ–¥—Å–≤—ñ—Ç–∫–∞
- –ú–∞–∫—Ä–æ—Å–∏
- –ü—Ä–æ—Ñ—ñ–ª—ñ
- Polling Rate
- Surface calibration

---

## –©–æ –¥–æ–¥–∞–Ω–æ –≤ —Ü—ñ–π –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

### üéØ –û—Å–Ω–æ–≤–Ω–∞ —Ñ—ñ—á–∞: –ü–æ–≤–Ω–∏–π USB Passthrough

RP2350 —Ç–µ–ø–µ—Ä –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —è–∫ **–ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–æ–∑–æ—Ä–∏–π –ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫** –º—ñ–∂ –º–∏—à–µ—é —Ç–∞ –∫–æ–º–ø'—é—Ç–µ—Ä–æ–º, –∫–æ–ø—ñ—é—é—á–∏ –≤—Å—ñ USB –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ—ó –º–∏—à—ñ.

### üìÅ –ù–æ–≤—ñ —Ñ–∞–π–ª–∏

1. **`src/passthrough.h`** - API –¥–ª—è passthrough —Ä–µ–∂–∏–º—É
2. **`src/passthrough.cc`** - –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è passthrough —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É
3. **`PASSTHROUGH.md`** - –¢–µ—Ö–Ω—ñ—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
4. **`PASSTHROUGH_UA.md`** - –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é
5. **`QUICKSTART_LOGITECH.md`** - –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è Logitech –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
6. **`CHANGELOG_PASSTHROUGH.md`** - –¶–µ–π —Ñ–∞–π–ª

### üîß –ú–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏

#### `src/globals.h` / `src/globals.cc`
- –î–æ–¥–∞–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤
- `passthrough_mode` (bool) - –ø—Ä–∞–ø–æ—Ä–µ—Ü—å —Ä–µ–∂–∏–º—É
- –ë—É—Ñ–µ—Ä–∏ –¥–ª—è device, config, HID report –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤
- –ë—É—Ñ–µ—Ä–∏ –¥–ª—è string –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤

#### `src/tinyusb_stuff.cc`
- `tud_descriptor_device_cb()` - –ø–æ–≤–µ—Ä—Ç–∞—î —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–π device descriptor
- `tud_descriptor_configuration_cb()` - –ø–æ–≤–µ—Ä—Ç–∞—î —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–π config descriptor  
- `tud_hid_descriptor_report_cb()` - –ø–æ–≤–µ—Ä—Ç–∞—î —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–π HID descriptor
- `tud_descriptor_string_cb()` - –ø–æ–≤–µ—Ä—Ç–∞—î —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω—ñ string descriptors
- `tud_hid_get_report_cb()` - –æ–±—Ä–æ–±–∫–∞ GET_REPORT –¥–ª—è passthrough
- `tud_hid_set_report_cb()` - –æ–±—Ä–æ–±–∫–∞ SET_REPORT –¥–ª—è passthrough

#### `src/remapper_single.cc`
- –î–æ–¥–∞–Ω–æ `tuh_mount_cb()` - callback –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤
- –ú–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ `tuh_hid_mount_cb()` - –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è HID report descriptor
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ passthrough –º–æ–¥—É–ª–µ–º

#### `src/remapper.cc`
- `handle_received_report()` - –≤ passthrough —Ä–µ–∂–∏–º—ñ –ø–µ—Ä–µ–¥–∞—î –¥–∞–Ω—ñ –Ω–∞–ø—Ä—è–º—É
- –î–æ–¥–∞–Ω–æ include "passthrough.h"

### ‚ú® –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

#### –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤
```cpp
passthrough_capture_device_descriptor()      // VID/PID, –≤–µ—Ä—Å—ñ—è USB
passthrough_capture_config_descriptor()      // –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏, endpoints
passthrough_capture_hid_report_descriptor()  // –§–æ—Ä–º–∞—Ç HID –∑–≤—ñ—Ç—ñ–≤
passthrough_capture_string_descriptor()      // Manufacturer, Product, Serial
```

#### –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–∏—Ö
```cpp
passthrough_forward_report()  // –ü—Ä–æ–∑–æ—Ä–∞ –ø–µ—Ä–µ–¥–∞—á–∞ Input Reports
```

#### –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ (–≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ)
```cpp
passthrough_handle_get_report()     // TODO: GET_REPORT forwarding
passthrough_handle_set_report()     // TODO: SET_REPORT forwarding
passthrough_handle_control_request() // TODO: Control Transfer forwarding
```

### üéÆ –ü–µ—Ä–µ–≤–∞–≥–∏

#### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ Logitech
- ‚úÖ Logitech G Hub —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –º–∏—à—É (G502, G Pro, —Ç–æ—â–æ)
- ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è DPI —á–µ—Ä–µ–∑ G Hub
- ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–æ–∫
- ‚úÖ RGB –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è
- ‚úÖ –ü—Ä–æ—Ñ—ñ–ª—ñ

#### –î–ª—è —ñ–Ω—à–∏—Ö –±—Ä–µ–Ω–¥—ñ–≤
- ‚úÖ Razer Synapse
- ‚úÖ Corsair iCUE
- ‚úÖ SteelSeries Engine
- ‚úÖ –ë—É–¥—å-—è–∫–µ vendor-specific –ü–ó

#### –¢–µ—Ö–Ω—ñ—á–Ω—ñ
- ‚úÖ –ü–ö –±–∞—á–∏—Ç—å –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É –º–∏—à—É, –∞ –Ω–µ RP2350
- ‚úÖ –í—Å—ñ vendor-specific –∫–æ–º–∞–Ω–¥–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å
- ‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—à–∏–≤–∫–∏ –º–∏—à—ñ
- ‚úÖ –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ —É—Å—ñ–º —ñ—Å–Ω—É—é—á–∏–º –ü–ó

### üìä –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

| –§—É–Ω–∫—Ü—ñ—è | –°—Ç–∞—Ç—É—Å | –ö–æ–º–µ–Ω—Ç–∞—Ä |
|---------|--------|----------|
| Device Descriptor –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | ‚úÖ –ì–æ—Ç–æ–≤–æ | –ü—Ä–∞—Ü—é—î |
| Config Descriptor –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | ‚úÖ –ì–æ—Ç–æ–≤–æ | –ü—Ä–∞—Ü—é—î |
| HID Report Descriptor –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | ‚úÖ –ì–æ—Ç–æ–≤–æ | –ü—Ä–∞—Ü—é—î |
| String Descriptors –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è | ‚úÖ –ì–æ—Ç–æ–≤–æ | –ü—Ä–∞—Ü—é—î |
| Input Reports forwarding | ‚úÖ –ì–æ—Ç–æ–≤–æ | –†—É—Ö –º–∏—à—ñ –ø—Ä–∞—Ü—é—î |
| Output Reports forwarding | üöß –í —Ä–æ–∑—Ä–æ–±—Ü—ñ | –ë–∞–∑–æ–≤–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ |
| Feature Reports GET | üöß –í —Ä–æ–∑—Ä–æ–±—Ü—ñ | –ü–æ—Ç—Ä–µ–±—É—î TinyUSB Host API |
| Feature Reports SET | üöß –í —Ä–æ–∑—Ä–æ–±—Ü—ñ | –ü–æ—Ç—Ä–µ–±—É—î TinyUSB Host API |
| Control Transfers vendor-specific | üöß –í —Ä–æ–∑—Ä–æ–±—Ü—ñ | –ü–æ—Ç—Ä–µ–±—É—î —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó |

### üîÆ TODO (–º–∞–π–±—É—Ç–Ω—ñ –≤–µ—Ä—Å—ñ—ó)

#### –í–∏—Å–æ–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ–≤–Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è GET_REPORT
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ–≤–Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è SET_REPORT  
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è vendor-specific Control Transfers
- [ ] –ö–µ—à—É–≤–∞–Ω–Ω—è Feature Reports –¥–ª—è —à–≤–∏–¥—à–æ–≥–æ –≤—ñ–¥–≥—É–∫—É

#### –°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
- [ ] –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∞ –æ–ø—Ü—ñ—è –¥–ª—è –≤–∏–±–æ—Ä—É passthrough/remapping
- [ ] GPIO –∫–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è —Ä–µ–∂–∏–º—ñ–≤
- [ ] –ì—ñ–±—Ä–∏–¥–Ω–∏–π —Ä–µ–∂–∏–º (passthrough + selective remapping)
- [ ] –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ multiple HID interfaces

#### –ù–∏–∑—å–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
- [ ] Performance profiling
- [ ] Latency measurements
- [ ] –°—Ç—Ä–µ—Å-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ —Ä—ñ–∑–Ω–∏–º–∏ –º–∏—à–∞–º–∏
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏

### üìù –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

#### –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (Passthrough —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π)
```cpp
// –í globals.cc
bool passthrough_mode = true;  // ‚úÖ
```

#### –í–∏–º–∫–Ω—É—Ç–∏ Passthrough
```cpp
// –í globals.cc
bool passthrough_mode = false;  // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ä–µ–∂–∏–º HID Remapper
```

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏
```bash
# –ü—ñ–¥ —á–∞—Å –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–∏—à—ñ –º–∞—î –¥—Ä—É–∫—É–≤–∞—Ç–∏:
Passthrough: –∑–∞—Ö–æ–ø–ª–µ–Ω–æ device descriptor VID=046D PID=C08B
Passthrough: –∑–∞—Ö–æ–ø–ª–µ–Ω–æ config descriptor len=XX
Passthrough: –∑–∞—Ö–æ–ø–ª–µ–Ω–æ HID report descriptor len=XXX
Passthrough: string[1] = 'Logitech'
Passthrough: string[2] = 'G502 HERO Gaming Mouse'
```

### üêõ –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è

1. **Feature Reports –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è** - —á–∞—Å—Ç–∫–æ–≤–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
   - –ë–∞–∑–æ–≤—ñ Input/Output Reports –ø—Ä–∞—Ü—é—é—Ç—å
   - GET_REPORT/SET_REPORT –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —Ä–æ–±–æ—Ç–∏

2. **Control Transfers** - –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
   - Vendor-specific –∫–æ–º–∞–Ω–¥–∏ –Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è
   - –ü–æ—Ç—Ä–µ–±—É—î —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ TinyUSB Host Control Transfer API

3. **Multiple interfaces** - –æ–±–º–µ–∂–µ–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
   - –ü—Ä–∞—Ü—é—î –∑ –ø–µ—Ä—à–∏–º HID —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
   - –°–∫–ª–∞–¥–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó –º–æ–∂—É—Ç—å –ø–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏ –¥–æ–æ–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è

### üîó –ü–æ—Å–∏–ª–∞–Ω–Ω—è

- [–ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](PASSTHROUGH.md)
- [–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –≤–µ—Ä—Å—ñ—è](PASSTHROUGH_UA.md)
- [–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç Logitech](QUICKSTART_LOGITECH.md)
- [HID Remapper –æ—Ä–∏–≥—ñ–Ω–∞–ª](https://github.com/jfedor2/hid-remapper)

### üë§ –ê–≤—Ç–æ—Ä –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

–î–æ–¥–∞–Ω–æ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –ø–æ–≤–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –∑ Logitech G Hub —Ç–∞ —ñ–Ω—à–∏–º —Ñ—ñ—Ä–º–æ–≤–∏–º –ü–ó –¥–ª—è —ñ–≥—Ä–æ–≤–∏—Ö –ø–µ—Ä–∏—Ñ–µ—Ä—ñ–π–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤.

### üìÖ –í–µ—Ä—Å—ñ—è

- **–î–∞—Ç–∞:** 2024
- **–í–µ—Ä—Å—ñ—è:** 1.0 (–ø–æ—á–∞—Ç–∫–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è)
- **–ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞:** HID Remapper firmware

---

**–†–µ–∑—é–º–µ:** Passthrough —Ä–µ–∂–∏–º –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î RP2350 –Ω–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–æ–∑–æ—Ä–∏–π USB hub, —è–∫–∏–π –Ω–µ –∑–º—ñ–Ω—é—î —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ñ—ñ—Ä–º–æ–≤–µ –ü–ó (Logitech G Hub, Razer Synapse, —Ç–æ—â–æ) –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∏—à—ñ, –≤ —Ç–æ–π —á–∞—Å —è–∫ RP2350 –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (—Ä–µ–º–∞–ø—ñ–Ω–≥, GPIO, –º–∞–∫—Ä–æ—Å–∏).

